"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/contacts";
exports.ids = ["pages/api/contacts"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcontacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccontacts.ts&middlewareConfigBase64=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcontacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccontacts.ts&middlewareConfigBase64=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_contacts_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\contacts.ts */ \"(api-node)/./pages/api/contacts.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_contacts_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_contacts_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/contacts\",\n        pathname: \"/api/contacts\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_contacts_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGY29udGFjdHMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2NvbnRhY3RzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNFO0FBQzFEO0FBQ3NEO0FBQ3REO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxtREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsbURBQVE7QUFDcEM7QUFDTyx3QkFBd0IseUdBQW1CO0FBQ2xEO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvcGFnZXMtYXBpL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcY29udGFjdHMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgJ2RlZmF1bHQnKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsICdjb25maWcnKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NvbnRhY3RzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY29udGFjdHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcontacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccontacts.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/contacts.ts":
/*!*******************************!*\
  !*** ./pages/api/contacts.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _src_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../src/lib/mongodb */ \"(api-node)/./src/lib/mongodb.ts\");\n\nasync function handler(req, res) {\n    const client = await _src_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n    const db = client.db('lpai');\n    if (req.method === 'GET') {\n        try {\n            const locationId = req.query.locationId;\n            console.log('ðŸ“ locationId received:', locationId);\n            if (!locationId) {\n                return res.status(400).json({\n                    error: 'Missing locationId'\n                });\n            }\n            // 1. Fetch contacts by location\n            const contacts = await db.collection('contacts').find({\n                locationId\n            }).sort({\n                createdAt: -1\n            }).toArray();\n            const contactIds = contacts.map((c)=>c._id.toString());\n            // 2. Fetch all related projects\n            const projects = await db.collection('projects').find({\n                locationId,\n                contactId: {\n                    $in: contactIds\n                }\n            }).toArray();\n            // 3. Group projects by contactId (as string)\n            const projectsByContact = {};\n            for (const p of projects){\n                const cid = p.contactId;\n                if (!projectsByContact[cid]) projectsByContact[cid] = [];\n                projectsByContact[cid].push(p);\n            }\n            // 4. Enrich contacts with projects, latest status, and summary\n            const contactsWithProjects = contacts.map((c)=>{\n                const cid = c._id.toString();\n                const related = projectsByContact[cid] || [];\n                const sorted = [\n                    ...related\n                ].sort((a, b)=>new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n                const latestStatus = sorted[0]?.status || null;\n                const completedCount = related.filter((p)=>p.status === 'Job Complete').length;\n                return {\n                    ...c,\n                    projects: related,\n                    latestStatus,\n                    summary: `${related.length} total â€¢ ${completedCount} completed`\n                };\n            });\n            return res.status(200).json(contactsWithProjects);\n        } catch (error) {\n            console.error('âŒ Failed to fetch contacts:', error);\n            return res.status(500).json({\n                error: 'Internal server error'\n            });\n        }\n    }\n    if (req.method === 'POST') {\n        try {\n            const { firstName, lastName, email, phone, notes, locationId } = req.body;\n            if (!firstName || !lastName || !email || !phone || !locationId) {\n                return res.status(400).json({\n                    error: 'Missing required fields'\n                });\n            }\n            const result = await db.collection('contacts').insertOne({\n                firstName,\n                lastName,\n                email,\n                phone,\n                notes,\n                locationId,\n                createdAt: new Date()\n            });\n            return res.status(201).json({\n                success: true,\n                _id: result.insertedId\n            });\n        } catch (error) {\n            console.error('âŒ Failed to create contact:', error);\n            return res.status(500).json({\n                error: 'Internal server error'\n            });\n        }\n    }\n    return res.status(405).json({\n        error: 'Method Not Allowed'\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQyxZQUFZLENBQUNDLFNBQVMsQ0FBQ0MsU0FBUyxDQUFDeEMsWUFBWTtnQkFDOUQsT0FBT0osSUFBSVEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBMEI7WUFDakU7WUFFQSxNQUFNcUMsU0FBUyxNQUFNN0MsR0FBR1UsVUFBVSxDQUFDLFlBQVlvQyxTQUFTLENBQUM7Z0JBQ3ZEUDtnQkFDQUM7Z0JBQ0FDO2dCQUNBQztnQkFDQUM7Z0JBQ0F6QztnQkFDQVcsV0FBVyxJQUFJbUI7WUFDakI7WUFFQSxPQUFPbEMsSUFBSVEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRXdDLFNBQVM7Z0JBQU03QixLQUFLMkIsT0FBT0csVUFBVTtZQUFDO1FBQ3RFLEVBQUUsT0FBT3hDLE9BQU87WUFDZEosUUFBUUksS0FBSyxDQUFDLCtCQUErQkE7WUFDN0MsT0FBT1YsSUFBSVEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsT0FBTztZQUF3QjtRQUMvRDtJQUNGO0lBRUEsT0FBT1YsSUFBSVEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztRQUFFQyxPQUFPO0lBQXFCO0FBQzVEIiwic291cmNlcyI6WyJDOlxcbHBhaS1hcHBcXGxwYWktYmFja2VuZFxccGFnZXNcXGFwaVxcY29udGFjdHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XHJcbmltcG9ydCBjbGllbnRQcm9taXNlIGZyb20gJy4uLy4uL3NyYy9saWIvbW9uZ29kYic7XHJcbmltcG9ydCB7IE9iamVjdElkIH0gZnJvbSAnbW9uZ29kYic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZTtcclxuICBjb25zdCBkYiA9IGNsaWVudC5kYignbHBhaScpO1xyXG5cclxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGxvY2F0aW9uSWQgPSByZXEucXVlcnkubG9jYXRpb25JZCBhcyBzdHJpbmc7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5ONIGxvY2F0aW9uSWQgcmVjZWl2ZWQ6JywgbG9jYXRpb25JZCk7XHJcblxyXG4gICAgICBpZiAoIWxvY2F0aW9uSWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ01pc3NpbmcgbG9jYXRpb25JZCcgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDEuIEZldGNoIGNvbnRhY3RzIGJ5IGxvY2F0aW9uXHJcbiAgICAgIGNvbnN0IGNvbnRhY3RzID0gYXdhaXQgZGJcclxuICAgICAgICAuY29sbGVjdGlvbignY29udGFjdHMnKVxyXG4gICAgICAgIC5maW5kKHsgbG9jYXRpb25JZCB9KVxyXG4gICAgICAgIC5zb3J0KHsgY3JlYXRlZEF0OiAtMSB9KVxyXG4gICAgICAgIC50b0FycmF5KCk7XHJcblxyXG4gICAgICBjb25zdCBjb250YWN0SWRzID0gY29udGFjdHMubWFwKGMgPT4gYy5faWQudG9TdHJpbmcoKSk7XHJcblxyXG4gICAgICAvLyAyLiBGZXRjaCBhbGwgcmVsYXRlZCBwcm9qZWN0c1xyXG4gICAgICBjb25zdCBwcm9qZWN0cyA9IGF3YWl0IGRiXHJcbiAgICAgICAgLmNvbGxlY3Rpb24oJ3Byb2plY3RzJylcclxuICAgICAgICAuZmluZCh7IGxvY2F0aW9uSWQsIGNvbnRhY3RJZDogeyAkaW46IGNvbnRhY3RJZHMgfSB9KVxyXG4gICAgICAgIC50b0FycmF5KCk7XHJcblxyXG4gICAgICAvLyAzLiBHcm91cCBwcm9qZWN0cyBieSBjb250YWN0SWQgKGFzIHN0cmluZylcclxuICAgICAgY29uc3QgcHJvamVjdHNCeUNvbnRhY3Q6IFJlY29yZDxzdHJpbmcsIGFueVtdPiA9IHt9O1xyXG4gICAgICBmb3IgKGNvbnN0IHAgb2YgcHJvamVjdHMpIHtcclxuICAgICAgICBjb25zdCBjaWQgPSBwLmNvbnRhY3RJZDtcclxuICAgICAgICBpZiAoIXByb2plY3RzQnlDb250YWN0W2NpZF0pIHByb2plY3RzQnlDb250YWN0W2NpZF0gPSBbXTtcclxuICAgICAgICBwcm9qZWN0c0J5Q29udGFjdFtjaWRdLnB1c2gocCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIDQuIEVucmljaCBjb250YWN0cyB3aXRoIHByb2plY3RzLCBsYXRlc3Qgc3RhdHVzLCBhbmQgc3VtbWFyeVxyXG4gICAgICBjb25zdCBjb250YWN0c1dpdGhQcm9qZWN0cyA9IGNvbnRhY3RzLm1hcChjID0+IHtcclxuICAgICAgICBjb25zdCBjaWQgPSBjLl9pZC50b1N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IHJlbGF0ZWQgPSBwcm9qZWN0c0J5Q29udGFjdFtjaWRdIHx8IFtdO1xyXG4gICAgICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5yZWxhdGVkXS5zb3J0KFxyXG4gICAgICAgICAgKGEsIGIpID0+IG5ldyBEYXRlKGIuY3JlYXRlZEF0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLmNyZWF0ZWRBdCkuZ2V0VGltZSgpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBsYXRlc3RTdGF0dXMgPSBzb3J0ZWRbMF0/LnN0YXR1cyB8fCBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvbXBsZXRlZENvdW50ID0gcmVsYXRlZC5maWx0ZXIocCA9PiBwLnN0YXR1cyA9PT0gJ0pvYiBDb21wbGV0ZScpLmxlbmd0aDtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIC4uLmMsXHJcbiAgICAgICAgICBwcm9qZWN0czogcmVsYXRlZCxcclxuICAgICAgICAgIGxhdGVzdFN0YXR1cyxcclxuICAgICAgICAgIHN1bW1hcnk6IGAke3JlbGF0ZWQubGVuZ3RofSB0b3RhbCDigKIgJHtjb21wbGV0ZWRDb3VudH0gY29tcGxldGVkYCxcclxuICAgICAgICB9O1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihjb250YWN0c1dpdGhQcm9qZWN0cyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgRmFpbGVkIHRvIGZldGNoIGNvbnRhY3RzOicsIGVycm9yKTtcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyBmaXJzdE5hbWUsIGxhc3ROYW1lLCBlbWFpbCwgcGhvbmUsIG5vdGVzLCBsb2NhdGlvbklkIH0gPSByZXEuYm9keTtcclxuXHJcbiAgICAgIGlmICghZmlyc3ROYW1lIHx8ICFsYXN0TmFtZSB8fCAhZW1haWwgfHwgIXBob25lIHx8ICFsb2NhdGlvbklkKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdNaXNzaW5nIHJlcXVpcmVkIGZpZWxkcycgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2NvbnRhY3RzJykuaW5zZXJ0T25lKHtcclxuICAgICAgICBmaXJzdE5hbWUsXHJcbiAgICAgICAgbGFzdE5hbWUsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGhvbmUsXHJcbiAgICAgICAgbm90ZXMsXHJcbiAgICAgICAgbG9jYXRpb25JZCxcclxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgX2lkOiByZXN1bHQuaW5zZXJ0ZWRJZCB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBGYWlsZWQgdG8gY3JlYXRlIGNvbnRhY3Q6JywgZXJyb3IpO1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBOb3QgQWxsb3dlZCcgfSk7XHJcbn1cclxuIl0sIm5hbWVzIjpbImNsaWVudFByb21pc2UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY2xpZW50IiwiZGIiLCJtZXRob2QiLCJsb2NhdGlvbklkIiwicXVlcnkiLCJjb25zb2xlIiwibG9nIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwiY29udGFjdHMiLCJjb2xsZWN0aW9uIiwiZmluZCIsInNvcnQiLCJjcmVhdGVkQXQiLCJ0b0FycmF5IiwiY29udGFjdElkcyIsIm1hcCIsImMiLCJfaWQiLCJ0b1N0cmluZyIsInByb2plY3RzIiwiY29udGFjdElkIiwiJGluIiwicHJvamVjdHNCeUNvbnRhY3QiLCJwIiwiY2lkIiwicHVzaCIsImNvbnRhY3RzV2l0aFByb2plY3RzIiwicmVsYXRlZCIsInNvcnRlZCIsImEiLCJiIiwiRGF0ZSIsImdldFRpbWUiLCJsYXRlc3RTdGF0dXMiLCJjb21wbGV0ZWRDb3VudCIsImZpbHRlciIsImxlbmd0aCIsInN1bW1hcnkiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsImVtYWlsIiwicGhvbmUiLCJub3RlcyIsImJvZHkiLCJyZXN1bHQiLCJpbnNlcnRPbmUiLCJzdWNjZXNzIiwiaW5zZXJ0ZWRJZCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/contacts.ts\n");

/***/ }),

/***/ "(api-node)/./src/lib/mongodb.ts":
/*!****************************!*\
  !*** ./src/lib/mongodb.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// âœ… Load your environment variables from .env.local\ndotenv__WEBPACK_IMPORTED_MODULE_1___default().config({\n    path: '.env.local'\n});\n// ðŸ” Optional: Log to verify correct URI loading (remove in production)\nconsole.log('MONGODB_URI value:', process.env.MONGODB_URI);\nconst uri = process.env.MONGODB_URI;\nconst options = {};\nif (!uri) {\n    throw new Error('âŒ Missing MONGODB_URI in .env.local');\n}\n// ðŸ§  Define global type to avoid reconnecting in dev\nlet client;\nlet clientPromise;\nconst globalWithMongo = global;\nif (!globalWithMongo._mongoClientPromise) {\n    client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n    globalWithMongo._mongoClientPromise = client.connect();\n}\nclientPromise = globalWithMongo._mongoClientPromise;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9saWIvbW9uZ29kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFzQztBQUNWO0FBRTVCLG9EQUFvRDtBQUNwREMsb0RBQWEsQ0FBQztJQUFFRSxNQUFNO0FBQWE7QUFFbkMsd0VBQXdFO0FBQ3hFQyxRQUFRQyxHQUFHLENBQUMsc0JBQXNCQyxRQUFRQyxHQUFHLENBQUNDLFdBQVc7QUFFekQsTUFBTUMsTUFBTUgsUUFBUUMsR0FBRyxDQUFDQyxXQUFXO0FBQ25DLE1BQU1FLFVBQVUsQ0FBQztBQUVqQixJQUFJLENBQUNELEtBQUs7SUFDUixNQUFNLElBQUlFLE1BQU07QUFDbEI7QUFFQSxxREFBcUQ7QUFDckQsSUFBSUM7QUFDSixJQUFJQztBQUVKLE1BQU1DLGtCQUFrQkM7QUFJeEIsSUFBSSxDQUFDRCxnQkFBZ0JFLG1CQUFtQixFQUFFO0lBQ3hDSixTQUFTLElBQUlaLGdEQUFXQSxDQUFDUyxLQUFLQztJQUM5QkksZ0JBQWdCRSxtQkFBbUIsR0FBR0osT0FBT0ssT0FBTztBQUN0RDtBQUVBSixnQkFBZ0JDLGdCQUFnQkUsbUJBQW1CO0FBRW5ELGlFQUFlSCxhQUFhQSxFQUFDIiwic291cmNlcyI6WyJDOlxcbHBhaS1hcHBcXGxwYWktYmFja2VuZFxcc3JjXFxsaWJcXG1vbmdvZGIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tICdtb25nb2RiJztcclxuaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xyXG5cclxuLy8g4pyFIExvYWQgeW91ciBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSAuZW52LmxvY2FsXHJcbmRvdGVudi5jb25maWcoeyBwYXRoOiAnLmVudi5sb2NhbCcgfSk7XHJcblxyXG4vLyDwn5SNIE9wdGlvbmFsOiBMb2cgdG8gdmVyaWZ5IGNvcnJlY3QgVVJJIGxvYWRpbmcgKHJlbW92ZSBpbiBwcm9kdWN0aW9uKVxyXG5jb25zb2xlLmxvZygnTU9OR09EQl9VUkkgdmFsdWU6JywgcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkkpO1xyXG5cclxuY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XHJcbmNvbnN0IG9wdGlvbnMgPSB7fTtcclxuXHJcbmlmICghdXJpKSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCfinYwgTWlzc2luZyBNT05HT0RCX1VSSSBpbiAuZW52LmxvY2FsJyk7XHJcbn1cclxuXHJcbi8vIPCfp6AgRGVmaW5lIGdsb2JhbCB0eXBlIHRvIGF2b2lkIHJlY29ubmVjdGluZyBpbiBkZXZcclxubGV0IGNsaWVudDogTW9uZ29DbGllbnQ7XHJcbmxldCBjbGllbnRQcm9taXNlOiBQcm9taXNlPE1vbmdvQ2xpZW50PjtcclxuXHJcbmNvbnN0IGdsb2JhbFdpdGhNb25nbyA9IGdsb2JhbCBhcyB0eXBlb2YgZ2xvYmFsVGhpcyAmIHtcclxuICBfbW9uZ29DbGllbnRQcm9taXNlPzogUHJvbWlzZTxNb25nb0NsaWVudD47XHJcbn07XHJcblxyXG5pZiAoIWdsb2JhbFdpdGhNb25nby5fbW9uZ29DbGllbnRQcm9taXNlKSB7XHJcbiAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwgb3B0aW9ucyk7XHJcbiAgZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpO1xyXG59XHJcblxyXG5jbGllbnRQcm9taXNlID0gZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2UhO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xpZW50UHJvbWlzZTtcclxuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwiZG90ZW52IiwiY29uZmlnIiwicGF0aCIsImNvbnNvbGUiLCJsb2ciLCJwcm9jZXNzIiwiZW52IiwiTU9OR09EQl9VUkkiLCJ1cmkiLCJvcHRpb25zIiwiRXJyb3IiLCJjbGllbnQiLCJjbGllbnRQcm9taXNlIiwiZ2xvYmFsV2l0aE1vbmdvIiwiZ2xvYmFsIiwiX21vbmdvQ2xpZW50UHJvbWlzZSIsImNvbm5lY3QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/mongodb.ts\n");

/***/ }),

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcontacts&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Ccontacts.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();